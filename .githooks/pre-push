#!/bin/sh

branch=$(git rev-parse --abbrev-ref HEAD)
userRepo=$(git remote show origin -n | ruby -ne 'puts /^\s*Fetch.*(:|\/){1}([^\/]+\/[^\/]+).git/.match($_)[2] rescue nil')

echo "branch: $branch"
echo "userRepo: $userRepo"

git ls-remote --heads origin $branch | grep $branch >/dev/null 
echo $?
if [ "$?" == "1" ]
then if [ -n "$userRepo" ]
    then
        echo ""
        echo "Create PR at: https://github.com/$userRepo/compare/$branch?expand=1"
        echo ""
    fi
fi